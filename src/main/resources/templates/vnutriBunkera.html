<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Мой веб-сайт</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script src="https://api-maps.yandex.ru/2.1/?apikey=8357b4a6-e8d0-4242-9797-06cb372b417e&lang=ru_RU"></script>
  <style>
    /* Стили для контейнера с картой и надписью */
    .map-container {
      display: flex;
    }

    .map {
      width: 400px;
      height: 400px;
    }

    .bunker {
      margin-left: 20px;
      font-size: 24px;
    }
    .bunker-info {
      text-align: center; /* Центрирование содержимого по центру */
      margin-top: 10px; /* Отступ сверху */
    }

    .bunker-label {
      font-size: 24px; /* Размер шрифта для надписи "Ближайший бункер -" */
      color: #FF0000; /* Красный цвет текста */
    }

    .bunker-address {
      font-size: 18px; /* Размер шрифта для адреса бункера */
      /* Дополнительные стили по вашему желанию */
    }
  </style>
</head>
<body>
<h1>Личный кабинЭЭТ</h1>
<div class="map-container">
  <div class="map" id="map"></div>
  <div class="bunker-info">

    <!-- Отображение адреса бункера -->
    <p class="bunker-address" id="user-address" th:text="${userAddress}"></p>
  </div>
</div>

<script>
  var myMap;
  var placemarks = [];

  // Вам нужно передать адрес пользователя в JavaScript из вашего серверного кода

  console.log(userAddress);
  function initMap() {
    myMap = new ymaps.Map("map", {
      center: [55.76, 37.64],
      zoom: 8
    });

    // Устанавливаем адрес пользователя в элемент с id "user-address"
    document.getElementById("user-address").textContent = userAddress;

    var addresses = [
      // Добавьте другие адреса здесь, если необходимо
    ];

    for (var i = 0; i < addresses.length; i++) {
      geocodeAndAddMarker(addresses[i]);
    }
  }

  function geocodeAndAddMarker(address) {
    ymaps.geocode(address, { results: 1 }).then(function (res) {
      var coordinates = res.geoObjects.get(0).geometry.getCoordinates();
      var fullAddress = res.geoObjects.get(0).getAddressLine();
      var placemark = new ymaps.Placemark(coordinates, {
        balloonContent: fullAddress
      });
      placemarks.push(placemark);
      myMap.geoObjects.add(placemark);
    });
  }

  ymaps.ready(initMap);
</script>
</body>
</html>
